(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,n){},131:function(e,n){},133:function(e,n){},144:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(68),i=t.n(o),c=(t(81),t(2)),u=t(75),l=t(5),s=t(6),d=t(3),f=t(69),m=t.n(f)()("/"),p=t(146);function v(){var e=Object(c.a)(["\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n"]);return v=function(){return e},e}function g(){var e=Object(c.a)(["\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n"]);return g=function(){return e},e}function b(){var e=Object(c.a)(["\n  margin-top: 10px;\n  font-size: 20px;\n  color: #e85a71;\n"]);return b=function(){return e},e}function h(){var e=Object(c.a)(["\n  width: 150px;\n  height: 35px;\n  margin-left: 15px;\n  padding-left: 10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n"]);return h=function(){return e},e}function x(){var e=Object(c.a)([""]);return x=function(){return e},e}function E(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 15px;\n  line-height: 35px;\n"]);return E=function(){return e},e}function j(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return j=function(){return e},e}var O=d.a.div(j()),k=d.a.div(E()),w=d.a.label(x()),y=d.a.input(h()),N=d.a.div(b()),I=d.a.button(g()),S=d.a.button(v()),C=function(e){var n=Object(r.useRef)(),t=Object(r.useRef)(),o=Object(r.useState)(!1),i=Object(s.a)(o,2),c=i[0],u=i[1],l=Object(r.useState)(""),d=Object(s.a)(l,2),f=d[0],v=d[1];return Object(r.useEffect)((function(){m.on("FE-error-user-exist",(function(r){var a=r.error;if(a)u(a),v("User name already exist");else{var o=n.current.value,i=t.current.value;sessionStorage.setItem("user",i),e.history.push("/room/".concat(o))}}))}),[e.history]),a.a.createElement(O,null,a.a.createElement(k,null,a.a.createElement(w,{htmlFor:"roomName"},"Room Name"),a.a.createElement(y,{type:"text",id:"roomName",ref:n})),a.a.createElement(k,null,a.a.createElement(w,{htmlFor:"userName"},"User Name"),a.a.createElement(y,{type:"text",id:"userName",ref:t})),a.a.createElement(I,{onClick:function(){var e=n.current.value,r=t.current.value;e&&r?m.emit("BE-check-user",{roomId:e,userName:r}):(u(!0),v("Enter Room Name or User Name"))}}," Join "),a.a.createElement(S,{onClick:function(){p.a.get("https://chat.c4ei.net/mysession").then((function(e){console.log(e.data)})).catch((function(e){console.log("\uc2e4\ud328")}))}}," MyEmail "),c?a.a.createElement(N,null,f):null)},z=t(24),D=t(19),T=t(25),R=t(39),F=t.n(R);function U(){var e=Object(c.a)([""]);return U=function(){return e},e}var B=d.a.video(U()),A=function(e){var n=Object(r.useRef)(),t=e.peer;return Object(r.useEffect)((function(){t.on("stream",(function(e){n.current.srcObject=e})),t.on("track",(function(e,n){}))}),[t]),a.a.createElement(B,{playsInline:!0,autoPlay:!0,ref:n})};function q(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: -65.95px;\n  left: 80px;\n  background-color: #4ea1d3;\n  color: white;\n  padding-top: 5px;\n  padding-right: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  text-align: left;\n\n  > div {\n    font-size: 0.85rem;\n    padding: 1px;\n    margin-bottom: 5px;\n\n    :not(:last-child):hover {\n      background-color: #77b7dd;\n      cursor: pointer;\n    }\n  }\n\n  > div:last-child {\n    border-top: 1px solid white;\n    cursor: context-menu !important;\n  }\n"]);return q=function(){return e},e}function V(){var e=Object(c.a)(["\n  display: flex;\n  position: absolute;\n  width: 20px;\n  top: 7px;\n  left: 80px;\n  z-index: 1;\n\n  :hover {\n    background-color: #476d84;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  > i {\n    width: 90%;\n    font-size: calc(10px + 1vmin);\n  }\n"]);return V=function(){return e},e}function M(){var e=Object(c.a)(["\n  position: relative;\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  .fa-microphone-slash {\n    color: #ee2560;\n  }\n\n  .fa-video-slash {\n    color: #ee2560;\n  }\n"]);return M=function(){return e},e}function P(){var e=Object(c.a)(["\n  width: 75px;\n  height: 30px;\n  border: none;\n  font-size: 0.9375rem;\n  line-height: 30px;\n  margin-right: 15px;\n  background-color: #ee2560;\n  border-radius: 15px;\n\n  :hover {\n    background-color: #f25483;\n    cursor: pointer;\n  }\n"]);return P=function(){return e},e}function J(){var e=Object(c.a)(["\n  width: 30px;\n  font-size: calc(16px + 1vmin);\n"]);return J=function(){return e},e}function W(){var e=Object(c.a)(["\n  width: auto;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  .sharing {\n    color: #ee2560;\n  }\n"]);return W=function(){return e},e}function G(){var e=Object(c.a)(["\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n"]);return G=function(){return e},e}function K(){var e=Object(c.a)([""]);return K=function(){return e},e}function L(){var e=Object(c.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n"]);return L=function(){return e},e}function $(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n\n  margin-left: 15px;\n"]);return $=function(){return e},e}function H(){var e=Object(c.a)(["\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 500;\n  background-color: #4ea1d3;\n"]);return H=function(){return e},e}var Q=d.a.div(H()),X=d.a.div($()),Y=d.a.div(L()),Z=d.a.div(K()),_=d.a.div(G()),ee=d.a.div(W()),ne=d.a.i(J()),te=d.a.div(P()),re=d.a.div(M()),ae=d.a.div(V()),oe=d.a.div(q()),ie=function(e){var n=e.clickChat,t=e.clickCameraDevice,o=e.goToBack,i=e.toggleCameraAudio,c=e.userVideoAudio,u=e.clickScreenSharing,l=e.screenShare,s=e.videoDevices,d=e.showVideoDevices,f=e.setShowVideoDevices,m=Object(r.useCallback)((function(e){f((function(e){return!e}))}),[f]);return a.a.createElement(Q,null,a.a.createElement(X,null,a.a.createElement(re,{onClick:i,"data-switch":"video"},a.a.createElement("div",null,c.video?a.a.createElement(ne,{className:"fas fa-video"}):a.a.createElement(ne,{className:"fas fa-video-slash"})),"Camera"),d&&a.a.createElement(oe,null,s.length>0&&s.map((function(e){return a.a.createElement("div",{key:e.deviceId,onClick:t,"data-value":e.deviceId},e.label)})),a.a.createElement("div",null,"Switch Camera")),a.a.createElement(ae,{onClick:m},a.a.createElement("i",{className:"fas fa-angle-up"})),a.a.createElement(re,{onClick:i,"data-switch":"audio"},a.a.createElement("div",null,c.audio?a.a.createElement(ne,{className:"fas fa-microphone"}):a.a.createElement(ne,{className:"fas fa-microphone-slash"})),"Audio")),a.a.createElement(Y,null,a.a.createElement(_,{onClick:n},a.a.createElement("div",null,a.a.createElement(ne,{className:"fas fa-comments"})),"Chat"),a.a.createElement(ee,{onClick:u},a.a.createElement("div",null,a.a.createElement(ne,{className:"fas fa-desktop ".concat(l?"sharing":"")})),"Share Screen")),a.a.createElement(Z,null,a.a.createElement(te,{onClick:o},"Stop")))};function ce(){var e=Object(c.a)(["\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n"]);return ce=function(){return e},e}function ue(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > strong {\n    margin-right: 35px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    margin-right: 30px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    background-color: #4ea1d3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n"]);return ue=function(){return e},e}function le(){var e=Object(c.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  margin-left: 15px;\n  text-align: left;\n\n  > strong {\n    margin-left: 3px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    box-shadow: 0px 0px 3px #4ea1d3;\n    font-size: 14px;\n  }\n"]);return le=function(){return e},e}function se(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 15px;\n  color: #454552;\n"]);return se=function(){return e},e}function de(){var e=Object(c.a)(["\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return de=function(){return e},e}function fe(){var e=Object(c.a)(["\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n"]);return fe=function(){return e},e}function me(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n"]);return me=function(){return e},e}var pe=d.a.div(me()),ve=d.a.div(fe()),ge=d.a.div(de()),be=d.a.div(se()),he=d.a.div(le()),xe=d.a.div(ue()),Ee=d.a.input(ce()),je=function(e){var n=e.display,t=e.roomId,o=sessionStorage.getItem("user"),i=Object(r.useState)([]),c=Object(s.a)(i,2),u=c[0],l=c[1],d=Object(r.useRef)(null),f=Object(r.useRef)();Object(r.useEffect)((function(){m.on("FE-receive-message",(function(e){var n=e.msg,t=e.sender;l((function(e){return[].concat(Object(z.a)(e),[{sender:t,msg:n}])}))}))}),[]),Object(r.useEffect)((function(){p()}),[u]);var p=function(){d.current.scrollIntoView({behavior:"smooth"})};return a.a.createElement(pe,{className:n?"":"width0"},a.a.createElement(ve,null,"Group Chat Room"),a.a.createElement(ge,null,a.a.createElement(be,null,u&&u.map((function(e,n){var t=e.sender,r=e.msg;return t!==o?a.a.createElement(he,{key:n},a.a.createElement("strong",null,t),a.a.createElement("p",null,r)):a.a.createElement(xe,{key:n},a.a.createElement("strong",null,t),a.a.createElement("p",null,r))})),a.a.createElement("div",{style:{float:"left",clear:"both"},ref:d}))),a.a.createElement(Ee,{ref:f,onKeyUp:function(e){if("Enter"===e.key){var n=e.target.value;n&&(m.emit("BE-send-message",{roomId:t,msg:n,sender:o}),f.current.value="")}},placeholder:"Enter your message"}))};function Oe(){var e=Object(c.a)(["\n  display: none;\n  position: absolute;\n  right: 15px;\n  top: 15px;\n"]);return Oe=function(){return e},e}function ke(){var e=Object(c.a)(["\n  position: absolute;\n  font-size: calc(20px + 5vmin);\n  z-index: 1;\n"]);return ke=function(){return e},e}function we(){var e=Object(c.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n"]);return we=function(){return e},e}function ye(){var e=Object(c.a)([""]);return ye=function(){return e},e}function Ne(){var e=Object(c.a)(["\n  position: relative;\n  width: 100%;\n  height: 100vh;\n"]);return Ne=function(){return e},e}function Ie(){var e=Object(c.a)(["\n  max-width: 100%;\n  height: 92%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n"]);return Ie=function(){return e},e}function Se(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n"]);return Se=function(){return e},e}var Ce=d.a.div(Se()),ze=d.a.div(Ie()),De=d.a.div(Ne()),Te=d.a.video(ye()),Re=d.a.div(we()),Fe=d.a.div(ke()),Ue=d.a.i(Oe()),Be=function(e){var n=sessionStorage.getItem("user"),t=Object(r.useState)([]),o=Object(s.a)(t,2),i=o[0],c=o[1],u=Object(r.useState)({localUser:{video:!0,audio:!0}}),l=Object(s.a)(u,2),d=l[0],f=l[1],p=Object(r.useState)([]),v=Object(s.a)(p,2),g=v[0],b=v[1],h=Object(r.useState)(!1),x=Object(s.a)(h,2),E=x[0],j=x[1],O=Object(r.useState)(!1),k=Object(s.a)(O,2),w=k[0],y=k[1],N=Object(r.useState)(!1),I=Object(s.a)(N,2),S=I[0],C=I[1],R=Object(r.useRef)([]),U=Object(r.useRef)(),B=Object(r.useRef)(),q=Object(r.useRef)(),V=e.match.params.roomId;function M(e){return R.current.find((function(n){return n.peerID===e}))}function P(e,n,t){return a.a.createElement(Re,{className:"width-peer".concat(i.length>8?"":i.length),onClick:W,key:n},function(e,n){if(d.hasOwnProperty(e)&&!d[e].video)return a.a.createElement(Fe,{key:e},e)}(e.userName),a.a.createElement(Ue,{className:"fas fa-expand"}),a.a.createElement(A,{key:n,peer:e,number:t.length}))}Object(r.useEffect)((function(){return navigator.mediaDevices.enumerateDevices().then((function(e){var n=e.filter((function(e){return"videoinput"===e.kind}));b(n)})),window.addEventListener("popstate",J),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){U.current.srcObject=e,q.current=e,m.emit("BE-join-room",{roomId:V,userName:n}),m.on("FE-user-join",(function(t){var r=[];t.forEach((function(t){var a=t.userId,o=t.info,i=o.userName,c=o.video,u=o.audio;if(i!==n){var l=function(e,n,t){var r=new F.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){m.emit("BE-call-user",{userToCall:e,from:n,signal:t})})),r.on("disconnect",(function(){r.destroy()})),r}(a,m.id,e);l.userName=i,l.peerID=a,R.current.push({peerID:a,peer:l,userName:i}),r.push(l),f((function(e){return Object(T.a)({},e,Object(D.a)({},l.userName,{video:c,audio:u}))}))}})),c(r)})),m.on("FE-receive-call",(function(n){var t=n.signal,r=n.from,a=n.info,o=a.userName,i=a.video,u=a.audio;if(!M(r)){var l=function(e,n,t){var r=new F.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){m.emit("BE-accept-call",{signal:e,to:n})})),r.on("disconnect",(function(){r.destroy()})),r.signal(e),r}(t,r,e);l.userName=o,R.current.push({peerID:r,peer:l,userName:o}),c((function(e){return[].concat(Object(z.a)(e),[l])})),f((function(e){return Object(T.a)({},e,Object(D.a)({},l.userName,{video:i,audio:u}))}))}})),m.on("FE-call-accepted",(function(e){var n=e.signal;M(e.answerId).peer.signal(n)})),m.on("FE-user-leave",(function(e){var n=e.userId,t=(e.userName,M(n));t.peer.destroy(),c((function(e){return e=e.filter((function(e){return e.peerID!==t.peer.peerID})),Object(z.a)(e)})),R.current=R.current.filter((function(e){return e.peerID!==n}))}))})),m.on("FE-toggle-camera",(function(e){var n=e.userId,t=e.switchTarget,r=M(n);f((function(e){var n=e[r.userName].video,a=e[r.userName].audio;return"video"===t?n=!n:a=!a,Object(T.a)({},e,Object(D.a)({},r.userName,{video:n,audio:a}))}))})),function(){m.disconnect()}}),[]);var J=function(e){e.preventDefault(),m.emit("BE-leave-room",{roomId:V,leaver:n}),sessionStorage.removeItem("user"),window.location.href="/"},W=function(e){var n=e.target;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen()};return a.a.createElement(Ce,{onClick:function(){S&&C(!1)}},a.a.createElement(De,null,a.a.createElement(ze,null,a.a.createElement(Re,{className:"width-peer".concat(i.length>8?"":i.length)},d.localUser.video?null:a.a.createElement(Fe,null,n),a.a.createElement(Ue,{className:"fas fa-expand"}),a.a.createElement(Te,{onClick:W,ref:U,muted:!0,autoPlay:!0,playInline:!0})),i&&i.map((function(e,n,t){return P(e,n,t)}))),a.a.createElement(ie,{clickScreenSharing:function(){w?B.current.onended():navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var n=e.getTracks()[0];R.current.forEach((function(e){var t=e.peer;t.replaceTrack(t.streams[0].getTracks().find((function(e){return"video"===e.kind})),n,q.current)})),n.onended=function(){R.current.forEach((function(e){var t=e.peer;t.replaceTrack(n,t.streams[0].getTracks().find((function(e){return"video"===e.kind})),q.current)})),U.current.srcObject=q.current,y(!1)},U.current.srcObject=e,B.current=n,y(!0)}))},clickChat:function(e){e.stopPropagation(),j(!E)},clickCameraDevice:function(e){if(e&&e.target&&e.target.dataset&&e.target.dataset.value){var n=e.target.dataset.value,t=U.current.srcObject.getAudioTracks()[0].enabled;navigator.mediaDevices.getUserMedia({video:{deviceId:n},audio:t}).then((function(e){var n=e.getTracks().find((function(e){return"video"===e.kind})),t=q.current.getTracks().find((function(e){return"video"===e.kind}));q.current.removeTrack(t),q.current.addTrack(n),R.current.forEach((function(e){e.peer.replaceTrack(t,n,q.current)}))}))}},goToBack:J,toggleCameraAudio:function(e){var n=e.target.getAttribute("data-switch");f((function(e){var t=e.localUser.video,r=e.localUser.audio;if("video"===n){t=!t,U.current.srcObject.getVideoTracks()[0].enabled=t}else{var a=U.current.srcObject.getAudioTracks()[0];r=!r,a?a.enabled=r:q.current.getAudioTracks()[0].enabled=r}return Object(T.a)({},e,{localUser:{video:t,audio:r}})})),m.emit("BE-toggle-camera-audio",{roomId:V,switchTarget:n})},userVideoAudio:d.localUser,screenShare:w,videoDevices:g,showVideoDevices:S,setShowVideoDevices:C})),a.a.createElement(je,{display:E,roomId:V}))};function Ae(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(8px + 2vmin);\n  color: white;\n  background-color: #454552;\n  text-align: center;\n"]);return Ae=function(){return e},e}var qe=d.a.div(Ae()),Ve=function(){return a.a.createElement(u.a,null,a.a.createElement(qe,null,a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/",component:C}),a.a.createElement(l.a,{exact:!0,path:"/room/:roomId",component:Be}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,n,t){e.exports=t(144)},81:function(e,n,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.950f7a33.chunk.js.map