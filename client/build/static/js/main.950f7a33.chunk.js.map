{"version":3,"sources":["socket.js","components/Main/Main.js","components/Video/VideoCard.js","components/BottomBar/BottomBar.js","components/Chat/Chat.js","components/Room/Room.js","App.js","serviceWorker.js","index.js"],"names":["sockets","io","MainContainer","styled","div","Row","Label","label","Input","input","Error","JoinButton","button","EmailFindBtn","Main","props","roomRef","useRef","userRef","useState","err","setErr","errMsg","setErrMsg","useEffect","socket","on","error","roomName","current","value","userName","sessionStorage","setItem","history","push","htmlFor","type","id","ref","onClick","emit","roomId","axios","get","then","response","console","log","data","catch","Video","video","VideoCard","peer","stream","srcObject","track","playsInline","autoPlay","Bar","Left","Center","Right","ChatButton","ScreenButton","FaIcon","i","StopButton","CameraButton","SwitchMenu","SwitchList","BottomBar","clickChat","clickCameraDevice","goToBack","toggleCameraAudio","userVideoAudio","clickScreenSharing","screenShare","videoDevices","showVideoDevices","setShowVideoDevices","handleToggle","useCallback","e","state","data-switch","className","length","map","device","key","deviceId","data-value","audio","ChatContainer","TopHeader","ChatArea","MessageList","Message","UserMessage","BottomInput","Chat","display","currentUser","getItem","msg","setMsg","messagesEndRef","inputRef","sender","msgs","scrollToBottom","scrollIntoView","behavior","idx","style","float","clear","onKeyUp","target","placeholder","RoomContainer","VideoContainer","VideoAndBarContainer","MyVideo","VideoBox","UserName","Room","peers","setPeers","localUser","setUserVideoAudio","setVideoDevices","displayChat","setDisplayChat","setScreenShare","peersRef","userVideoRef","screenTrackRef","userStream","match","params","findPeer","find","p","peerID","createUserVideo","index","arr","expandScreen","hasOwnProperty","writeUserName","number","navigator","mediaDevices","enumerateDevices","devices","filtered","filter","kind","window","addEventListener","getUserMedia","users","forEach","userId","info","caller","Peer","initiator","trickle","signal","userToCall","from","destroy","createPeer","preList","incomingSignal","callerId","to","addPeer","answerId","peerIdx","user","switchTarget","disconnect","preventDefault","leaver","removeItem","location","href","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","muted","playInline","onended","getDisplayMedia","cursor","screenTrack","getTracks","replaceTrack","streams","stopPropagation","event","dataset","enabledAudio","getAudioTracks","enabled","newStreamTrack","oldStreamTrack","removeTrack","addTrack","getAttribute","videoSwitch","audioSwitch","getVideoTracks","userAudioTrack","AppContainer","App","exact","path","component","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.950f7a33.chunk.js","sourcesContent":["import io from 'socket.io-client';\n// const sockets = io('https://localhost:3001', { autoConnect: true, forceNew: true });\nconst sockets = io('/');\nexport default sockets;\n","import React, { useRef, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport axios from 'axios';\n\nconst Main = (props) => {\n  const roomRef = useRef();\n  const userRef = useRef();\n  const [err, setErr] = useState(false);\n  const [errMsg, setErrMsg] = useState('');\n\n  useEffect(() => {\n\n    socket.on('FE-error-user-exist', ({ error }) => {\n      if (!error) {\n        const roomName = roomRef.current.value;\n        const userName = userRef.current.value;\n\n        sessionStorage.setItem('user', userName);\n        props.history.push(`/room/${roomName}`);\n      } else {\n        setErr(error);\n        setErrMsg('User name already exist');\n      }\n    });\n  }, [props.history]);\n\n  function clickJoin() {\n    const roomName = roomRef.current.value;\n    const userName = userRef.current.value;\n\n    if (!roomName || !userName) {\n      setErr(true);\n      setErrMsg('Enter Room Name or User Name');\n    } else {\n      socket.emit('BE-check-user', { roomId: roomName, userName });\n    }\n  }\n\n  // let [photos, setMyEmail] = useState([]);\n  function searchMyEmail() {\n    const url = \"https://chat.c4ei.net/mysession\";\n    axios.get(url)\n    .then(function(response) {\n        // setMyEmail(response.data);\n        // console.log(\"성공\");\n        console.log(response.data);\n    })\n    .catch(function(error) {\n        console.log(\"실패\");\n    })\n  }\n\n\n  return (\n    <MainContainer>\n      <Row>\n        <Label htmlFor=\"roomName\">Room Name</Label>\n        <Input type=\"text\" id=\"roomName\" ref={roomRef} />\n      </Row>\n      <Row>\n        <Label htmlFor=\"userName\">User Name</Label>\n        <Input type=\"text\" id=\"userName\" ref={userRef} />\n      </Row>\n      <JoinButton onClick={clickJoin}> Join </JoinButton>\n      <EmailFindBtn onClick={searchMyEmail}> MyEmail </EmailFindBtn>\n      {err ? <Error>{errMsg}</Error> : null}\n    </MainContainer>\n  );\n};\n\nconst MainContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 15px;\n  line-height: 35px;\n`;\n\nconst Label = styled.label``;\n\nconst Input = styled.input`\n  width: 150px;\n  height: 35px;\n  margin-left: 15px;\n  padding-left: 10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n`;\n\nconst Error = styled.div`\n  margin-top: 10px;\n  font-size: 20px;\n  color: #e85a71;\n`;\n\nconst JoinButton = styled.button`\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n`;\nconst EmailFindBtn = styled.button`\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n`;\n\nexport default Main;\n","import React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nconst VideoCard = (props) => {\n  const ref = useRef();\n  const peer = props.peer;\n\n  useEffect(() => {\n    peer.on('stream', (stream) => {\n      ref.current.srcObject = stream;\n    });\n    peer.on('track', (track, stream) => {\n    });\n  }, [peer]);\n\n  return (\n    <Video\n      playsInline\n      autoPlay\n      ref={ref}\n    />\n  );\n};\n\nconst Video = styled.video``;\n\nexport default VideoCard;\n","import React, { useCallback } from 'react';\nimport styled from 'styled-components';\n\nconst BottomBar = ({\n  clickChat,\n  clickCameraDevice,\n  goToBack,\n  toggleCameraAudio,\n  userVideoAudio,\n  clickScreenSharing,\n  screenShare,\n  videoDevices,\n  showVideoDevices,\n  setShowVideoDevices\n}) => {\n  const handleToggle = useCallback(\n    (e) => {\n      setShowVideoDevices((state) => !state);\n    },\n    [setShowVideoDevices]\n  );\n\n  return (\n    <Bar>\n      <Left>\n        <CameraButton onClick={toggleCameraAudio} data-switch='video'>\n          <div>\n            {userVideoAudio.video ? (\n              <FaIcon className='fas fa-video'></FaIcon>\n            ) : (\n              <FaIcon className='fas fa-video-slash'></FaIcon>\n            )}\n          </div>\n          Camera\n        </CameraButton>\n        {showVideoDevices && (\n          <SwitchList>\n            {videoDevices.length > 0 &&\n              videoDevices.map((device) => {\n                return <div key={device.deviceId} onClick={clickCameraDevice} data-value={device.deviceId} >{device.label}</div>;\n              })}\n            <div>Switch Camera</div>\n          </SwitchList>\n        )}\n        <SwitchMenu onClick={handleToggle}>\n          <i className='fas fa-angle-up'></i>\n        </SwitchMenu>\n        <CameraButton onClick={toggleCameraAudio} data-switch='audio'>\n          <div>\n            {userVideoAudio.audio ? (\n              <FaIcon className='fas fa-microphone'></FaIcon>\n            ) : (\n              <FaIcon className='fas fa-microphone-slash'></FaIcon>\n            )}\n          </div>\n          Audio\n        </CameraButton>\n      </Left>\n      <Center>\n        <ChatButton onClick={clickChat}>\n          <div>\n            <FaIcon className='fas fa-comments'></FaIcon>\n          </div>\n          Chat\n        </ChatButton>\n        <ScreenButton onClick={clickScreenSharing}>\n          <div>\n            <FaIcon\n              className={`fas fa-desktop ${screenShare ? 'sharing' : ''}`}\n            ></FaIcon>\n          </div>\n          Share Screen\n        </ScreenButton>\n      </Center>\n      <Right>\n        <StopButton onClick={goToBack}>Stop</StopButton>\n      </Right>\n    </Bar>\n  );\n};\n\nconst Bar = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 500;\n  background-color: #4ea1d3;\n`;\nconst Left = styled.div`\n  display: flex;\n  align-items: center;\n\n  margin-left: 15px;\n`;\n\nconst Center = styled.div`\n  flex: 1;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Right = styled.div``;\n\nconst ChatButton = styled.div`\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n`;\n\nconst ScreenButton = styled.div`\n  width: auto;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  .sharing {\n    color: #ee2560;\n  }\n`;\n\nconst FaIcon = styled.i`\n  width: 30px;\n  font-size: calc(16px + 1vmin);\n`;\n\nconst StopButton = styled.div`\n  width: 75px;\n  height: 30px;\n  border: none;\n  font-size: 0.9375rem;\n  line-height: 30px;\n  margin-right: 15px;\n  background-color: #ee2560;\n  border-radius: 15px;\n\n  :hover {\n    background-color: #f25483;\n    cursor: pointer;\n  }\n`;\n\nconst CameraButton = styled.div`\n  position: relative;\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #77b7dd;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  .fa-microphone-slash {\n    color: #ee2560;\n  }\n\n  .fa-video-slash {\n    color: #ee2560;\n  }\n`;\n\nconst SwitchMenu = styled.div`\n  display: flex;\n  position: absolute;\n  width: 20px;\n  top: 7px;\n  left: 80px;\n  z-index: 1;\n\n  :hover {\n    background-color: #476d84;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  > i {\n    width: 90%;\n    font-size: calc(10px + 1vmin);\n  }\n`;\n\nconst SwitchList = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: -65.95px;\n  left: 80px;\n  background-color: #4ea1d3;\n  color: white;\n  padding-top: 5px;\n  padding-right: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  text-align: left;\n\n  > div {\n    font-size: 0.85rem;\n    padding: 1px;\n    margin-bottom: 5px;\n\n    :not(:last-child):hover {\n      background-color: #77b7dd;\n      cursor: pointer;\n    }\n  }\n\n  > div:last-child {\n    border-top: 1px solid white;\n    cursor: context-menu !important;\n  }\n`;\n\nexport default BottomBar;","import React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport socket from '../../socket';\n\nconst Chat = ({ display, roomId }) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [msg, setMsg] = useState([]);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef();\n  \n  useEffect(() => {\n    socket.on('FE-receive-message', ({ msg, sender }) => {\n      setMsg((msgs) => [...msgs, { sender, msg }]);\n    });\n  }, []);\n\n  // Scroll to Bottom of Message List\n  useEffect(() => {scrollToBottom()}, [msg])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: 'smooth'});\n  }\n\n  const sendMessage = (e) => {\n    if (e.key === 'Enter') {\n      const msg = e.target.value;\n\n      if (msg) {\n        socket.emit('BE-send-message', { roomId, msg, sender: currentUser });\n        inputRef.current.value = '';\n      }\n    }\n  };\n\n  return (\n    <ChatContainer className={display ? '' : 'width0'}>\n      <TopHeader>Group Chat Room</TopHeader>\n      <ChatArea>\n        <MessageList>\n          {msg &&\n            msg.map(({ sender, msg }, idx) => {\n              if (sender !== currentUser) {\n                return (\n                  <Message key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </Message>\n                );\n              } else {\n                return (\n                  <UserMessage key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </UserMessage>\n                );\n              }\n            })}\n            <div style={{float:'left', clear: 'both'}} ref={messagesEndRef} />\n        </MessageList>\n      </ChatArea>\n      <BottomInput\n        ref={inputRef}\n        onKeyUp={sendMessage}\n        placeholder=\"Enter your message\"\n      />\n    </ChatContainer>\n  );\n};\n\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n`;\n\nconst TopHeader = styled.div`\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\n\nconst ChatArea = styled.div`\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst MessageList = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 15px;\n  color: #454552;\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  margin-left: 15px;\n  text-align: left;\n\n  > strong {\n    margin-left: 3px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    box-shadow: 0px 0px 3px #4ea1d3;\n    font-size: 14px;\n  }\n`;\n\nconst UserMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > strong {\n    margin-right: 35px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    margin-right: 30px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    background-color: #4ea1d3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n`;\n\nconst BottomInput = styled.input`\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport default Chat;\n","import React, { useState, useEffect, useRef } from 'react';\nimport Peer from 'simple-peer';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport VideoCard from '../Video/VideoCard';\nimport BottomBar from '../BottomBar/BottomBar';\nimport Chat from '../Chat/Chat';\n\nconst Room = (props) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [peers, setPeers] = useState([]);\n  const [userVideoAudio, setUserVideoAudio] = useState({\n    localUser: { video: true, audio: true },\n  });\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [displayChat, setDisplayChat] = useState(false);\n  const [screenShare, setScreenShare] = useState(false);\n  const [showVideoDevices, setShowVideoDevices] = useState(false);\n  const peersRef = useRef([]);\n  const userVideoRef = useRef();\n  const screenTrackRef = useRef();\n  const userStream = useRef();\n  const roomId = props.match.params.roomId;\n\n  useEffect(() => {\n    // Get Video Devices\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\n      const filtered = devices.filter((device) => device.kind === 'videoinput');\n      setVideoDevices(filtered);\n    });\n\n    // Set Back Button Event\n    window.addEventListener('popstate', goToBack);\n\n    // Connect Camera & Mic\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        userVideoRef.current.srcObject = stream;\n        userStream.current = stream;\n\n        socket.emit('BE-join-room', { roomId, userName: currentUser });\n        socket.on('FE-user-join', (users) => {\n          // all users\n          const peers = [];\n          users.forEach(({ userId, info }) => {\n            let { userName, video, audio } = info;\n\n            if (userName !== currentUser) {\n              const peer = createPeer(userId, socket.id, stream);\n\n              peer.userName = userName;\n              peer.peerID = userId;\n\n              peersRef.current.push({\n                peerID: userId,\n                peer,\n                userName,\n              });\n              peers.push(peer);\n\n              setUserVideoAudio((preList) => {\n                return {\n                  ...preList,\n                  [peer.userName]: { video, audio },\n                };\n              });\n            }\n          });\n\n          setPeers(peers);\n        });\n\n        socket.on('FE-receive-call', ({ signal, from, info }) => {\n          let { userName, video, audio } = info;\n          const peerIdx = findPeer(from);\n\n          if (!peerIdx) {\n            const peer = addPeer(signal, from, stream);\n\n            peer.userName = userName;\n\n            peersRef.current.push({\n              peerID: from,\n              peer,\n              userName: userName,\n            });\n            setPeers((users) => {\n              return [...users, peer];\n            });\n            setUserVideoAudio((preList) => {\n              return {\n                ...preList,\n                [peer.userName]: { video, audio },\n              };\n            });\n          }\n        });\n\n        socket.on('FE-call-accepted', ({ signal, answerId }) => {\n          const peerIdx = findPeer(answerId);\n          peerIdx.peer.signal(signal);\n        });\n\n        socket.on('FE-user-leave', ({ userId, userName }) => {\n          const peerIdx = findPeer(userId);\n          peerIdx.peer.destroy();\n          setPeers((users) => {\n            users = users.filter((user) => user.peerID !== peerIdx.peer.peerID);\n            return [...users];\n          });\n          peersRef.current = peersRef.current.filter(({ peerID }) => peerID !== userId );\n        });\n      });\n\n    socket.on('FE-toggle-camera', ({ userId, switchTarget }) => {\n      const peerIdx = findPeer(userId);\n\n      setUserVideoAudio((preList) => {\n        let video = preList[peerIdx.userName].video;\n        let audio = preList[peerIdx.userName].audio;\n\n        if (switchTarget === 'video') video = !video;\n        else audio = !audio;\n\n        return {\n          ...preList,\n          [peerIdx.userName]: { video, audio },\n        };\n      });\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  function createPeer(userId, caller, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('BE-call-user', {\n        userToCall: userId,\n        from: caller,\n        signal,\n      });\n    });\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerId, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('BE-accept-call', { signal, to: callerId });\n    });\n\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  function findPeer(id) {\n    return peersRef.current.find((p) => p.peerID === id);\n  }\n\n  function createUserVideo(peer, index, arr) {\n    return (\n      <VideoBox\n        className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n        onClick={expandScreen}\n        key={index}\n      >\n        {writeUserName(peer.userName)}\n        <FaIcon className='fas fa-expand' />\n        <VideoCard key={index} peer={peer} number={arr.length} />\n      </VideoBox>\n    );\n  }\n\n  function writeUserName(userName, index) {\n    if (userVideoAudio.hasOwnProperty(userName)) {\n      if (!userVideoAudio[userName].video) {\n        return <UserName key={userName}>{userName}</UserName>;\n      }\n    }\n  }\n\n  // Open Chat\n  const clickChat = (e) => {\n    e.stopPropagation();\n    setDisplayChat(!displayChat);\n  };\n\n  // BackButton\n  const goToBack = (e) => {\n    e.preventDefault();\n    socket.emit('BE-leave-room', { roomId, leaver: currentUser });\n    sessionStorage.removeItem('user');\n    window.location.href = '/';\n  };\n\n  const toggleCameraAudio = (e) => {\n    const target = e.target.getAttribute('data-switch');\n\n    setUserVideoAudio((preList) => {\n      let videoSwitch = preList['localUser'].video;\n      let audioSwitch = preList['localUser'].audio;\n\n      if (target === 'video') {\n        const userVideoTrack = userVideoRef.current.srcObject.getVideoTracks()[0];\n        videoSwitch = !videoSwitch;\n        userVideoTrack.enabled = videoSwitch;\n      } else {\n        const userAudioTrack = userVideoRef.current.srcObject.getAudioTracks()[0];\n        audioSwitch = !audioSwitch;\n\n        if (userAudioTrack) {\n          userAudioTrack.enabled = audioSwitch;\n        } else {\n          userStream.current.getAudioTracks()[0].enabled = audioSwitch;\n        }\n      }\n\n      return {\n        ...preList,\n        localUser: { video: videoSwitch, audio: audioSwitch },\n      };\n    });\n\n    socket.emit('BE-toggle-camera-audio', { roomId, switchTarget: target });\n  };\n\n  const clickScreenSharing = () => {\n    if (!screenShare) {\n      navigator.mediaDevices\n        .getDisplayMedia({ cursor: true })\n        .then((stream) => {\n          const screenTrack = stream.getTracks()[0];\n\n          peersRef.current.forEach(({ peer }) => {\n            // replaceTrack (oldTrack, newTrack, oldStream);\n            peer.replaceTrack(\n              peer.streams[0]\n                .getTracks()\n                .find((track) => track.kind === 'video'),\n              screenTrack,\n              userStream.current\n            );\n          });\n\n          // Listen click end\n          screenTrack.onended = () => {\n            peersRef.current.forEach(({ peer }) => {\n              peer.replaceTrack(\n                screenTrack,\n                peer.streams[0]\n                  .getTracks()\n                  .find((track) => track.kind === 'video'),\n                userStream.current\n              );\n            });\n            userVideoRef.current.srcObject = userStream.current;\n            setScreenShare(false);\n          };\n\n          userVideoRef.current.srcObject = stream;\n          screenTrackRef.current = screenTrack;\n          setScreenShare(true);\n        });\n    } else {\n      screenTrackRef.current.onended();\n    }\n  };\n\n  const expandScreen = (e) => {\n    const elem = e.target;\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Chrome, Safari & Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  };\n\n  const clickBackground = () => {\n    if (!showVideoDevices) return;\n\n    setShowVideoDevices(false);\n  };\n\n  const clickCameraDevice = (event) => {\n    if (event && event.target && event.target.dataset && event.target.dataset.value) {\n      const deviceId = event.target.dataset.value;\n      const enabledAudio = userVideoRef.current.srcObject.getAudioTracks()[0].enabled;\n\n      navigator.mediaDevices\n        .getUserMedia({ video: { deviceId }, audio: enabledAudio })\n        .then((stream) => {\n          const newStreamTrack = stream.getTracks().find((track) => track.kind === 'video');\n          const oldStreamTrack = userStream.current\n            .getTracks()\n            .find((track) => track.kind === 'video');\n\n          userStream.current.removeTrack(oldStreamTrack);\n          userStream.current.addTrack(newStreamTrack);\n\n          peersRef.current.forEach(({ peer }) => {\n            // replaceTrack (oldTrack, newTrack, oldStream);\n            peer.replaceTrack(\n              oldStreamTrack,\n              newStreamTrack,\n              userStream.current\n            );\n          });\n        });\n    }\n  };\n\n  return (\n    <RoomContainer onClick={clickBackground}>\n      <VideoAndBarContainer>\n        <VideoContainer>\n          {/* Current User Video */}\n          <VideoBox\n            className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n          >\n            {userVideoAudio['localUser'].video ? null : (\n              <UserName>{currentUser}</UserName>\n            )}\n            <FaIcon className='fas fa-expand' />\n            <MyVideo\n              onClick={expandScreen}\n              ref={userVideoRef}\n              muted\n              autoPlay\n              playInline\n            ></MyVideo>\n          </VideoBox>\n          {/* Joined User Vidoe */}\n          {peers &&\n            peers.map((peer, index, arr) => createUserVideo(peer, index, arr))}\n        </VideoContainer>\n        <BottomBar\n          clickScreenSharing={clickScreenSharing}\n          clickChat={clickChat}\n          clickCameraDevice={clickCameraDevice}\n          goToBack={goToBack}\n          toggleCameraAudio={toggleCameraAudio}\n          userVideoAudio={userVideoAudio['localUser']}\n          screenShare={screenShare}\n          videoDevices={videoDevices}\n          showVideoDevices={showVideoDevices}\n          setShowVideoDevices={setShowVideoDevices}\n        />\n      </VideoAndBarContainer>\n      <Chat display={displayChat} roomId={roomId} />\n    </RoomContainer>\n  );\n};\n\nconst RoomContainer = styled.div`\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n`;\n\nconst VideoContainer = styled.div`\n  max-width: 100%;\n  height: 92%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n`;\n\nconst VideoAndBarContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100vh;\n`;\n\nconst MyVideo = styled.video``;\n\nconst VideoBox = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n`;\n\nconst UserName = styled.div`\n  position: absolute;\n  font-size: calc(20px + 5vmin);\n  z-index: 1;\n`;\n\nconst FaIcon = styled.i`\n  display: none;\n  position: absolute;\n  right: 15px;\n  top: 15px;\n`;\n\nexport default Room;","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Main from './components/Main/Main';\nimport Room from './components/Room/Room'\nimport styled from 'styled-components';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AppContainer>\n        <Switch>\n          <Route exact path=\"/\" component={Main} />\n          <Route exact path=\"/room/:roomId\" component={Room} />\n        </Switch>\n      </AppContainer>\n    </BrowserRouter>\n  );\n}\n\nconst AppContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(8px + 2vmin);\n  color: white;\n  background-color: #454552;\n  text-align: center;\n`;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}